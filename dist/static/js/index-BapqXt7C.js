import{g as k}from"./monitor-CnDhlbHP.js";import{i as y}from"./index-Bb6yjXMn.js";import{d as I,k as s,al as R,r as t,b as w,w as B,c as b,o as c,e as n,i as a,F,A as D,h as O,g as A,t as N,f as o,_ as S}from"./index-DLbSnZ-2.js";const T={class:"main"},V=I({name:"CacheInfo",__name:"index",setup($){const l=s(!0),m=s([]),f=s(null),_=s(null);async function g(){l.value=!0;const{data:p}=await k().finally(()=>{l.value=!1}),e=p;m.value=[{field:"Redis版本",value:e.info.redis_version},{field:"运行模式",value:e.info.redis_mode=="standalone"?"单机":"集群"},{field:"端口",value:e.info.tcp_port},{field:"客户端数",value:e.info.connected_clients},{field:"运行时间(天)",value:e.info.uptime_in_days},{field:"使用内存",value:e.info.used_memory_human},{field:"使用CPU",value:parseFloat(e.info.used_cpu_user_children).toFixed(2)},{field:"内存配置",value:e.info.total_system_memory_human},{field:"AOF是否开启",value:e.info.aof_enabled=="0"?"否":"是"},{field:"RDB是否成功",value:e.info.rdb_last_bgsave_status},{field:"Key数量",value:e.dbSize},{field:"网络入口/出口",value:`${e.info.instantaneous_input_kbps} kbs/ ${e.info.instantaneous_output_kbps} kbs`}],y(f.value,"macarons").setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"命令统计",type:"pie",roseType:"radius",radius:[15,95],center:["40%","50%"],data:e.commandStats,animationEasing:"cubicInOut",animationDuration:1e3}]}),y(_.value,"macarons").setOption({tooltip:{formatter:`{b} <br/>{a} : ${e.info.used_memory_human}`},series:[{name:"峰值",type:"gauge",min:0,max:1e3,detail:{formatter:e.info.used_memory_human},data:[{value:parseFloat(e.info.used_memory_human),name:"内存消耗"}]}]})}return R(()=>{g()}),(p,e)=>{const v=t("el-descriptions-item"),h=t("el-descriptions"),i=t("el-card"),r=t("el-col"),d=t("el-row"),x=w("loading");return B((c(),b("div",T,[n(d,{gutter:2},{default:a(()=>[n(r,{span:24,class:"card-box"},{default:a(()=>[n(i,null,{header:a(()=>e[0]||(e[0]=[o("span",null,"Redis信息",-1)])),default:a(()=>[n(h,{column:4},{default:a(()=>[(c(!0),b(F,null,D(m.value,(u,C)=>(c(),O(v,{key:C,label:u.field,span:u.span},{default:a(()=>[A(N(u.value),1)]),_:2},1032,["label","span"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),n(d,{gutter:40},{default:a(()=>[n(r,{span:12,class:"card-box"},{default:a(()=>[n(i,null,{header:a(()=>e[1]||(e[1]=[o("span",null,"命令统计",-1)])),default:a(()=>[o("div",{ref_key:"commandChartRef",ref:f,style:{height:"420px"}},null,512)]),_:1})]),_:1}),n(r,{span:12,class:"card-box"},{default:a(()=>[n(i,null,{header:a(()=>e[2]||(e[2]=[o("span",null,"内存信息",-1)])),default:a(()=>[o("div",{ref_key:"memoryChartRef",ref:_,style:{height:"420px"}},null,512)]),_:1})]),_:1})]),_:1}),n(d)])),[[x,l.value]])}}}),K=S(V,[["__scopeId","data-v-9a9686b3"]]);export{K as default};
