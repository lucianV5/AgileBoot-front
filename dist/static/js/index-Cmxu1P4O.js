import{useLoginLogHook as H}from"./hook-FWtU_jte.js";import{P as M}from"./index-A5l2LtVK.js";import{d as O,m as q,k as V,r as n,c as L,o as g,e as l,i as a,u as e,F as j,A as G,h as J,f as K,N as Q,E as p,g as i,_ as W}from"./index-DLbSnZ-2.js";import{d as S}from"./delete-Ce0TSdK5.js";import{d as X}from"./search-DMYzPYXy.js";import{d as Z}from"./refresh-C_2cW1e5.js";import{C as h}from"./common-MP0nqKMS.js";import"./log-meop4lWx.js";import"./epTheme-Cax6E919.js";import"./index-CqpMF8Ft.js";const ee={class:"main"},oe=O({name:"SystemOperationLog",__name:"index",setup(le){const w=q().dictionaryList["sysLoginLog.status"],u=V(),c=V(),{searchFormParams:r,pageLoading:b,columns:C,dataList:v,pagination:P,timeRange:f,defaultSort:R,multipleSelection:$,onSearch:k,resetForm:B,exportAllExcel:F,getLoginLogList:_,handleDelete:I,handleBulkDelete:U}=H();return(te,o)=>{const y=n("el-input"),d=n("el-form-item"),A=n("el-option"),D=n("el-select"),E=n("el-date-picker"),s=n("el-button"),N=n("el-form"),Y=n("el-popconfirm"),T=n("pure-table");return g(),L("div",ee,[l(N,{ref_key:"searchFormRef",ref:c,inline:!0,model:e(r),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px]"},{default:a(()=>[l(d,{label:"登录IP：",prop:"ipAddress"},{default:a(()=>[l(y,{modelValue:e(r).ipAddress,"onUpdate:modelValue":o[0]||(o[0]=t=>e(r).ipAddress=t),placeholder:"请输入IP地址",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),l(d,{label:"用户名：",prop:"username"},{default:a(()=>[l(y,{modelValue:e(r).username,"onUpdate:modelValue":o[1]||(o[1]=t=>e(r).username=t),placeholder:"请选择用户名称",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),l(d,{label:"状态：",prop:"status"},{default:a(()=>[l(D,{modelValue:e(r).status,"onUpdate:modelValue":o[2]||(o[2]=t=>e(r).status=t),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:a(()=>[(g(!0),L(j,null,G(e(w),t=>(g(),J(A,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,null,{default:a(()=>[o[8]||(o[8]=K("label",{class:"el-form-item__label is-required font-bold"},"登录时间：",-1)),l(E,{class:"!w-[240px]",modelValue:e(f),"onUpdate:modelValue":o[3]||(o[3]=t=>Q(f)?f.value=t:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1,__:[8]}),l(d,null,{default:a(()=>[l(s,{type:"primary",icon:e(p)(e(X)),loading:e(b),onClick:e(k)},{default:a(()=>o[9]||(o[9]=[i(" 搜索 ")])),_:1,__:[9]},8,["icon","loading","onClick"]),l(s,{icon:e(p)(e(Z)),onClick:o[4]||(o[4]=t=>e(B)(c.value,u.value))},{default:a(()=>o[10]||(o[10]=[i(" 重置 ")])),_:1,__:[10]},8,["icon"])]),_:1})]),_:1},8,["model"]),l(e(M),{title:"登录日志列表",columns:e(C),onRefresh:e(k)},{buttons:a(()=>[l(s,{type:"danger",icon:e(p)(e(S)),onClick:o[5]||(o[5]=t=>e(U)(u.value))},{default:a(()=>o[11]||(o[11]=[i(" 批量删除 ")])),_:1,__:[11]},8,["icon"]),l(s,{type:"primary",onClick:o[6]||(o[6]=t=>e(h).exportExcel(e(C),e(v),"登录日志列表"))},{default:a(()=>o[12]||(o[12]=[i("单页导出")])),_:1,__:[12]}),l(s,{type:"primary",onClick:e(F)},{default:a(()=>o[13]||(o[13]=[i("全部导出")])),_:1,__:[13]},8,["onClick"])]),default:a(({size:t,dynamicColumns:z})=>[l(T,{border:"",ref_key:"tableRef",ref:u,"align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(b),size:t,adaptive:"",data:e(v),columns:z,"default-sort":e(R),pagination:e(P),paginationSmall:t==="small","header-cell-style":{background:"var(--el-table-row-hover-bg-color)",color:"var(--el-text-color-primary)"},onPageSizeChange:e(_),onPageCurrentChange:e(_),onSortChange:e(_),onSelectionChange:o[7]||(o[7]=m=>$.value=m.map(x=>x.logId))},{operation:a(({row:m})=>[l(Y,{title:`是否确认删除编号为${m.logId}的这条日志`,onConfirm:x=>e(I)(m)},{reference:a(()=>[l(s,{class:"reset-margin",link:"",type:"danger",size:t,icon:e(p)(e(S))},{default:a(()=>o[14]||(o[14]=[i(" 删除 ")])),_:2,__:[14]},1032,["size","icon"])]),_:2},1032,["title","onConfirm"])]),_:2},1032,["loading","size","data","columns","default-sort","pagination","paginationSmall","onPageSizeChange","onPageCurrentChange","onSortChange"])]),_:1},8,["columns","onRefresh"])])}}}),_e=W(oe,[["__scopeId","data-v-0d662a7f"]]);export{_e as default};
