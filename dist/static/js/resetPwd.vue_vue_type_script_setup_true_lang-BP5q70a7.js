import{u as _}from"./user-CNETU6zZ.js";import{d as P,l as c,k as p,r as d,h as g,o as b,i as a,e as r,g as V,Q as v,aE as y}from"./index-DLbSnZ-2.js";const C=P({__name:"resetPwd",setup(q){const o=c({oldPassword:void 0,newPassword:void 0,confirmPassword:void 0}),u=p(),m=p({oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)]|[()])+$)(?!^.*[\u4E00-\u9FA5].*$)([^(0-9a-zA-Z)]|[()]|[a-z]|[A-Z]|[0-9]){8,18}$/,message:"新密码格式应为8-18位数字、字母、符号的任意两种组合",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:(n,e,s)=>{o.newPassword!==e?s(new Error("两次输入的密码不一致")):s()},trigger:"blur"}]});function w(){u.value.validate(n=>{n&&_(v(o)).then(()=>{y("修改成功",{type:"success"})})})}return(n,e)=>{const s=d("el-input"),t=d("el-form-item"),i=d("el-button"),f=d("el-form");return b(),g(f,{ref_key:"pwdRef",ref:u,model:o,rules:m.value,"label-width":"80px"},{default:a(()=>[r(t,{label:"旧密码",prop:"oldPassword"},{default:a(()=>[r(s,{modelValue:o.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=l=>o.oldPassword=l),placeholder:"请输入旧密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(t,{label:"新密码",prop:"newPassword"},{default:a(()=>[r(s,{modelValue:o.newPassword,"onUpdate:modelValue":e[1]||(e[1]=l=>o.newPassword=l),placeholder:"请输入新密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(t,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[r(s,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>o.confirmPassword=l),placeholder:"请确认密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(t,null,{default:a(()=>[r(i,{type:"primary",onClick:w},{default:a(()=>e[3]||(e[3]=[V("保存")])),_:1,__:[3]})]),_:1})]),_:1},8,["model","rules"])}}});export{C as _};
