import{b as A}from"./monitor-CnDhlbHP.js";import{d as J,k as s,al as G,r as t,b as S,w as F,c as _,o as f,e as l,i as a,f as i,F as x,A as N,h as T,g as k,t as D,_ as K}from"./index-DLbSnZ-2.js";const L={class:"main"},P=J({name:"ServerInfo",__name:"index",setup(E){const c=s(!0),I=s([]),b=s([]),y=s([]),g=s([]),h=s([]);async function M(){c.value=!0;const{data:p}=await A().finally(()=>{c.value=!1}),e=p;I.value=[{field:"核心数",value:e.cpuInfo.cpuNum},{field:"用户使用率",value:e.cpuInfo.used+"%"},{field:"系统使用率",value:e.cpuInfo.sys+"%"},{field:"当前空闲率",value:e.cpuInfo.free+"%"}],b.value=[{field:"总内存",machine:e.memoryInfo.total+"G",jvm:e.jvmInfo.total+"M"},{field:"已用内存",machine:e.memoryInfo.used+"G",jvm:e.jvmInfo.used+"M"},{field:"剩余内存",machine:e.memoryInfo.free+"G",jvm:e.jvmInfo.free+"M"},{field:"使用率",machine:e.memoryInfo.usage+"%",jvm:e.jvmInfo.usage+"%",warning:e.jvmInfo.usage>30}],y.value=[{field:"服务器名称",value:e.systemInfo.computerName},{field:"操作系统",value:e.systemInfo.osName},{field:"服务器IP",value:e.systemInfo.computerIp},{field:"系统架构",value:e.systemInfo.osArch}],g.value=[{field:"JDK名称",value:e.jvmInfo.name,span:1},{field:"JDK版本",value:e.jvmInfo.version,span:1},{field:"启动时间",value:e.jvmInfo.startTime,span:1},{field:"运行时长",value:e.jvmInfo.runTime,span:1},{field:"安装路径",value:e.jvmInfo.home,span:2},{field:"项目路径",value:e.systemInfo.userDir,span:2},{field:"运行参数",value:e.jvmInfo.inputArgs,span:2}],h.value=e.diskInfos}function B({row:p}){if(p.warning)return"text-red-500"}return G(()=>{M()}),(p,e)=>{const n=t("el-table-column"),v=t("el-table"),r=t("el-card"),u=t("el-col"),d=t("el-row"),j=t("el-descriptions-item"),w=t("el-descriptions"),C=S("loading");return F((f(),_("div",L,[l(d,{gutter:30},{default:a(()=>[l(u,{span:12,class:"card-box"},{default:a(()=>[l(r,null,{header:a(()=>e[0]||(e[0]=[i("span",null,"CPU",-1)])),default:a(()=>[l(v,{data:I.value,"show-header":!0,style:{width:"100%"}},{default:a(()=>[l(n,{prop:"field",label:"属性"}),l(n,{prop:"value",label:"值"})]),_:1},8,["data"])]),_:1})]),_:1}),l(u,{span:12,class:"card-box"},{default:a(()=>[l(r,null,{header:a(()=>e[1]||(e[1]=[i("span",null,"内存",-1)])),default:a(()=>[l(v,{data:b.value,"show-header":!0,style:{width:"100%"},"cell-class-name":B},{default:a(()=>[l(n,{prop:"field",label:"属性"}),l(n,{prop:"machine",label:"服务器"}),l(n,{prop:"jvm",label:"JVM"})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),l(d,null,{default:a(()=>[l(u,{span:24,class:"card-box"},{default:a(()=>[l(r,null,{header:a(()=>e[2]||(e[2]=[i("span",null,"服务器信息",-1)])),default:a(()=>[l(w,{column:2},{default:a(()=>[(f(!0),_(x,null,N(y.value,(o,m)=>(f(),T(j,{key:m,label:o.field},{default:a(()=>[k(D(o.value),1)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(d,{gutter:2},{default:a(()=>[l(u,{span:24,class:"card-box"},{default:a(()=>[l(r,null,{header:a(()=>e[3]||(e[3]=[i("span",null,"JVM信息",-1)])),default:a(()=>[l(w,{column:2},{default:a(()=>[(f(!0),_(x,null,N(g.value,(o,m)=>(f(),T(j,{key:m,label:o.field,span:o.span},{default:a(()=>[k(D(o.value),1)]),_:2},1032,["label","span"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(d,null,{default:a(()=>[l(u,{span:24,class:"card-box"},{default:a(()=>[l(r,null,{header:a(()=>e[4]||(e[4]=[i("span",null,"磁盘状态",-1)])),default:a(()=>[l(v,{data:h.value,"show-header":!0,style:{width:"100%"}},{default:a(()=>[l(n,{prop:"dirName",label:"盘符路径"}),l(n,{prop:"sysTypeName",label:"文件系统"}),l(n,{prop:"typeName",label:"盘符类型"}),l(n,{prop:"total",label:"总大小"}),l(n,{prop:"free",label:"可用大小"}),l(n,{prop:"used",label:"已用大小"}),l(n,{prop:"usage",label:"已用百分比",formatter:(o,m,V)=>V+"%",width:"180"},null,8,["formatter"])]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),l(d)])),[[C,c.value]])}}}),z=K(P,[["__scopeId","data-v-cb5e9a71"]]);export{z as default};
