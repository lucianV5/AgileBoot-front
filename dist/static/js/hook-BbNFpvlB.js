import{k as o,l as g,z as f,n as h,Q as b,aE as L}from"./index-DLbSnZ-2.js";import{a as W,l as y}from"./monitor-CnDhlbHP.js";import{C as w}from"./common-MP0nqKMS.js";import"./index-CqpMF8Ft.js";function S(){const t={total:0,pageSize:10,currentPage:1,background:!0},p=o([]),i=g({ipAddress:void 0,username:void 0});let r=[];const s=o([]),n=o(!0),m=[{label:"会话编号",prop:"tokenId",minWidth:100},{label:"用户名",prop:"username",minWidth:120},{label:"所属部门",prop:"deptName",minWidth:120},{label:"IP地址",prop:"ipAddress",minWidth:120},{label:"登录地点",prop:"loginLocation",minWidth:120},{label:"操作系统",prop:"operationSystem",minWidth:120},{label:"浏览器",prop:"browser",minWidth:120},{label:"登录时间",minWidth:160,prop:"loginTime",formatter:({loginTime:e})=>h(e).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:140,slot:"operation"}];async function a(){t.currentPage=1,n.value=!0;const{data:e}=await W(b(i)).finally(()=>{n.value=!1});r=e.rows,t.total=e.rows.length,l()}function d(e,c){e&&(e.resetFields(),c.getTableRef().clearSort(),t.currentPage=1,a())}async function l(){s.value=w.paginateList(r,t)}async function u(e){await y(e.tokenId).then(()=>{L(`您强制登出了用户:${e.username}`,{type:"success"}),a()})}return f(()=>{a()}),{searchFormParams:i,pageLoading:n,columns:m,dataList:s,pagination:t,timeRange:p,onSearch:a,getList:l,resetForm:d,handleLogout:u}}export{S as useHook};
