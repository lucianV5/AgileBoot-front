import{useOperationLogHook as G}from"./hook-B2aYhqBA.js";import{P as J}from"./index-A5l2LtVK.js";import{d as K,m as w,k as R,r,c as b,o as m,e as t,i as a,u as e,F as $,A as T,h as P,f as Q,N as W,E as d,g as i,_ as X}from"./index-DLbSnZ-2.js";import{d as U}from"./delete-Ce0TSdK5.js";import{d as Z}from"./search-DMYzPYXy.js";import{d as ee}from"./refresh-C_2cW1e5.js";import{C as le}from"./common-MP0nqKMS.js";import"./description.vue_vue_type_style_index_0_lang-BxX6UK_U.js";import"./log-meop4lWx.js";import"./epTheme-Cax6E919.js";import"./index-CqpMF8Ft.js";const oe={width:1024,height:1024,body:'<path fill="currentColor" d="M512 160c320 0 512 352 512 352S832 864 512 864S0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288c52.608 79.872 211.456 288 436.8 288c225.28 0 384.128-208.064 436.8-288c-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448a224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160s-71.744-160-160-160z"/>'},te={class:"main"},ae=K({name:"SystemOperationLog",__name:"index",setup(ne){const z=w().dictionaryList["sysOperationLog.businessType"],B=w().dictionaryList["sysOperationLog.status"],f=R(),y=R(),{searchFormParams:n,pageLoading:v,columns:C,dataList:k,pagination:F,timeRange:_,defaultSort:M,multipleSelection:O,onSearch:x,resetForm:D,exportAllExcel:q,openDialog:E,getOperationLogList:c,handleDelete:I,handleBulkDelete:N}=G();return(re,l)=>{const V=r("el-input"),u=r("el-form-item"),S=r("el-option"),L=r("el-select"),Y=r("el-date-picker"),s=r("el-button"),A=r("el-form"),H=r("el-popconfirm"),h=r("pure-table");return m(),b("div",te,[t(A,{ref_key:"searchFormRef",ref:y,inline:!0,model:e(n),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px]"},{default:a(()=>[t(u,{label:"系统模块：",prop:"requestModule"},{default:a(()=>[t(V,{modelValue:e(n).requestModule,"onUpdate:modelValue":l[0]||(l[0]=o=>e(n).requestModule=o),placeholder:"请输入系统模块",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),t(u,{label:"操作类型：",prop:"businessType"},{default:a(()=>[t(L,{modelValue:e(n).businessType,"onUpdate:modelValue":l[1]||(l[1]=o=>e(n).businessType=o),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:a(()=>[(m(!0),b($,null,T(e(z),o=>(m(),P(S,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"操作人员：",prop:"username"},{default:a(()=>[t(V,{modelValue:e(n).username,"onUpdate:modelValue":l[2]||(l[2]=o=>e(n).username=o),placeholder:"请输入创建者",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),t(u,{label:"状态：",prop:"status"},{default:a(()=>[t(L,{modelValue:e(n).status,"onUpdate:modelValue":l[3]||(l[3]=o=>e(n).status=o),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:a(()=>[(m(!0),b($,null,T(e(B),o=>(m(),P(S,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[l[9]||(l[9]=Q("label",{class:"el-form-item__label is-required font-bold"},"操作时间：",-1)),t(Y,{class:"!w-[240px]",modelValue:e(_),"onUpdate:modelValue":l[4]||(l[4]=o=>W(_)?_.value=o:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1,__:[9]}),t(u,null,{default:a(()=>[t(s,{type:"primary",icon:e(d)(e(Z)),loading:e(v),onClick:e(x)},{default:a(()=>l[10]||(l[10]=[i(" 搜索 ")])),_:1,__:[10]},8,["icon","loading","onClick"]),t(s,{icon:e(d)(e(ee)),onClick:l[5]||(l[5]=o=>e(D)(y.value,f.value))},{default:a(()=>l[11]||(l[11]=[i(" 重置 ")])),_:1,__:[11]},8,["icon"])]),_:1})]),_:1},8,["model"]),t(e(J),{title:"操作日志列表",columns:e(C),onRefresh:e(x)},{buttons:a(()=>[t(s,{type:"danger",icon:e(d)(e(U)),onClick:l[6]||(l[6]=o=>e(N)(f.value))},{default:a(()=>l[12]||(l[12]=[i(" 批量删除 ")])),_:1,__:[12]},8,["icon"]),t(s,{type:"primary",onClick:l[7]||(l[7]=o=>e(le).exportExcel(e(C),e(k),"操作日志列表"))},{default:a(()=>l[13]||(l[13]=[i("单页导出")])),_:1,__:[13]}),t(s,{type:"primary",onClick:e(q)},{default:a(()=>l[14]||(l[14]=[i("全部导出")])),_:1,__:[14]},8,["onClick"])]),default:a(({size:o,dynamicColumns:j})=>[t(h,{border:"",ref_key:"tableRef",ref:f,"align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(v),size:o,adaptive:"",data:e(k),columns:j,"default-sort":e(M),pagination:e(F),paginationSmall:o==="small","header-cell-style":{background:"var(--el-table-row-hover-bg-color)",color:"var(--el-text-color-primary)"},onPageSizeChange:e(c),onPageCurrentChange:e(c),onSortChange:e(c),onSelectionChange:l[8]||(l[8]=p=>O.value=p.map(g=>g.operationId))},{operation:a(({row:p})=>[t(s,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(d)(e(oe)),onClick:g=>e(E)(p)},{default:a(()=>l[15]||(l[15]=[i(" 详情 ")])),_:2,__:[15]},1032,["size","icon","onClick"]),t(H,{title:`是否确认删除编号为${p.operationId}的这条日志`,onConfirm:g=>e(I)(p)},{reference:a(()=>[t(s,{class:"reset-margin",link:"",type:"danger",size:o,icon:e(d)(e(U))},{default:a(()=>l[16]||(l[16]=[i(" 删除 ")])),_:2,__:[16]},1032,["size","icon"])]),_:2},1032,["title","onConfirm"])]),_:2},1032,["loading","size","data","columns","default-sort","pagination","paginationSmall","onPageSizeChange","onPageCurrentChange","onSortChange"])]),_:1},8,["columns","onRefresh"])])}}}),ye=X(ae,[["__scopeId","data-v-0e7d60f2"]]);export{ye as default};
