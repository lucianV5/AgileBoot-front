import{V as B}from"./VDialog-B5iLIfwi.js";import{a as O,u as A}from"./post-CAgdbTIk.js";import{d as D,x as F,l as j,m as E,k as g,r,h as b,o as f,i as s,e as a,c as L,F as M,A as P,u as V,g as R,t as H,av as y}from"./index-DLbSnZ-2.js";const z=D({__name:"post-form-modal",props:{type:{},modelValue:{type:Boolean},row:{}},emits:["update:modelValue","success"],setup(v,{emit:k}){const n=v,c=k,d=F({get:()=>n.modelValue,set(l){c("update:modelValue",l)}}),o=j({postId:0,postCode:"",postName:"",postSort:1,remark:"",status:""}),m=E().dictionaryMap["common.status"],C={postName:[{required:!0,message:"岗位名称不能为空"}],postCode:[{required:!0,message:"岗位编码不能为空"}],postSort:[{required:!0,message:"岗位序号不能为空"}]},_=g();function w(){var l;n.row?Object.assign(o,n.row):(l=_.value)==null||l.resetFields()}const p=g(!1);async function x(){try{p.value=!0,n.type==="add"?await O(o):n.type==="update"&&await A(o),y.info("提交成功"),d.value=!1,c("success")}catch(l){console.error(l),y.error((l==null?void 0:l.message)||"提交失败")}finally{p.value=!1}}return(l,t)=>{const i=r("el-input"),u=r("el-form-item"),N=r("el-input-number"),S=r("el-radio"),U=r("el-radio-group"),q=r("el-form");return f(),b(B,{"show-full-screen":"","fixed-body-height":!1,"use-body-scrolling":"",title:l.type==="add"?"新增岗位":"更新岗位",modelValue:d.value,"onUpdate:modelValue":t[5]||(t[5]=e=>d.value=e),loading:p.value,onConfirm:x,onCancel:t[6]||(t[6]=e=>d.value=!1),onOpened:w},{default:s(()=>[a(q,{model:o,"label-width":"120px",rules:C,ref_key:"formRef",ref:_},{default:s(()=>[a(u,{prop:"postName",label:"岗位名称",required:"","inline-message":""},{default:s(()=>[a(i,{modelValue:o.postName,"onUpdate:modelValue":t[0]||(t[0]=e=>o.postName=e)},null,8,["modelValue"])]),_:1}),a(u,{prop:"postCode",label:"岗位编码",required:""},{default:s(()=>[a(i,{modelValue:o.postCode,"onUpdate:modelValue":t[1]||(t[1]=e=>o.postCode=e)},null,8,["modelValue"])]),_:1}),a(u,{prop:"postSort",label:"岗位顺序",required:""},{default:s(()=>[a(N,{min:1,modelValue:o.postSort,"onUpdate:modelValue":t[2]||(t[2]=e=>o.postSort=e)},null,8,["modelValue"])]),_:1}),a(u,{prop:"status",label:"岗位状态"},{default:s(()=>[a(U,{modelValue:o.status,"onUpdate:modelValue":t[3]||(t[3]=e=>o.status=e)},{default:s(()=>[(f(!0),L(M,null,P(Object.keys(V(m)),e=>(f(),b(S,{key:e,label:V(m)[e].value},{default:s(()=>[R(H(V(m)[e].label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{prop:"remark",label:"备注",style:{"margin-bottom":"0"}},{default:s(()=>[a(i,{type:"textarea",modelValue:o.remark,"onUpdate:modelValue":t[4]||(t[4]=e=>o.remark=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue","loading"])}}});export{z as _};
