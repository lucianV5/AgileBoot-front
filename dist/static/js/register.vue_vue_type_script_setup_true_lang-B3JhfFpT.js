import{M as u}from"./motion-C_Wa_q6C.js";import{d as E,k as w,l as N,r as i,h,o as z,u as a,i as o,e as l,E as p,f as F,g as f,t as M,aE as g}from"./index-DLbSnZ-2.js";import{u as v,a as D,d as T}from"./iphone-C7XGbbJ-.js";import{d as x}from"./lock-fill-BZPnsoM7.js";const Z={width:24,height:24,body:'<path fill="currentColor" d="M20 22H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5v2Zm-8-9a6 6 0 1 1 0-12a6 6 0 0 1 0 12Z"/>'},j={class:"flex justify-between w-full"},q={name:"Register"},J=E({...q,props:{currentPage:{type:Number,default:3}},emits:["update:currentPage"],setup(H,{emit:b}){const C=b,y=w(!1),n=w(!1),r=N({username:"",phone:"",verifyCode:"",password:"",repeatPassword:""}),c=w(),{isDisabled:k,text:V}=v(),P=[{validator:(m,e,s)=>{e===""?s(new Error("请输入确认密码")):r.password!==e?s(new Error("两次密码不一致")):s()},trigger:"blur"}],U=async m=>{n.value=!0,m&&await m.validate((e,s)=>{if(e)y.value?setTimeout(()=>{g("注册成功",{type:"success"}),n.value=!1},2e3):(n.value=!1,g("请勾选隐私政策",{type:"warning"}));else return n.value=!1,s})};function R(){v().end(),C("update:currentPage",0)}return(m,e)=>{const s=i("el-input"),d=i("el-form-item"),_=i("el-button"),$=i("el-checkbox"),B=i("el-form");return z(),h(B,{ref_key:"ruleFormRef",ref:c,model:r,rules:a(D),size:"large"},{default:o(()=>[l(a(u),null,{default:o(()=>[l(d,{rules:[{required:!0,message:"请输入账号",trigger:"blur"}],prop:"username"},{default:o(()=>[l(s,{clearable:"",modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=t=>r.username=t),placeholder:"账号","prefix-icon":a(p)(a(Z))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),l(a(u),{delay:100},{default:o(()=>[l(d,{prop:"phone"},{default:o(()=>[l(s,{clearable:"",modelValue:r.phone,"onUpdate:modelValue":e[1]||(e[1]=t=>r.phone=t),placeholder:"手机号码","prefix-icon":a(p)(a(T))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),l(a(u),{delay:150},{default:o(()=>[l(d,{prop:"verifyCode"},{default:o(()=>[F("div",j,[l(s,{clearable:"",modelValue:r.verifyCode,"onUpdate:modelValue":e[2]||(e[2]=t=>r.verifyCode=t),placeholder:"短信验证码","prefix-icon":a(p)("ri:shield-keyhole-line")},null,8,["modelValue","prefix-icon"]),l(_,{disabled:a(k),class:"ml-2",onClick:e[3]||(e[3]=t=>a(v)().start(c.value,"phone"))},{default:o(()=>[f(M(a(V).length>0?a(V)+"秒后重新获取":"获取验证码"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),l(a(u),{delay:200},{default:o(()=>[l(d,{prop:"password"},{default:o(()=>[l(s,{clearable:"","show-password":"",modelValue:r.password,"onUpdate:modelValue":e[4]||(e[4]=t=>r.password=t),placeholder:"密码","prefix-icon":a(p)(a(x))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),l(a(u),{delay:250},{default:o(()=>[l(d,{rules:P,prop:"repeatPassword"},{default:o(()=>[l(s,{clearable:"","show-password":"",modelValue:r.repeatPassword,"onUpdate:modelValue":e[5]||(e[5]=t=>r.repeatPassword=t),placeholder:"确认密码","prefix-icon":a(p)(a(x))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),l(a(u),{delay:300},{default:o(()=>[l(d,null,{default:o(()=>[l($,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=t=>y.value=t)},{default:o(()=>e[8]||(e[8]=[f(" 我已仔细阅读并接受 ")])),_:1,__:[8]},8,["modelValue"]),l(_,{link:"",type:"primary"},{default:o(()=>e[9]||(e[9]=[f(" 隐私政策 ")])),_:1,__:[9]})]),_:1})]),_:1}),l(a(u),{delay:350},{default:o(()=>[l(d,null,{default:o(()=>[l(_,{class:"w-full",size:"default",type:"primary",loading:n.value,onClick:e[7]||(e[7]=t=>U(c.value))},{default:o(()=>e[10]||(e[10]=[f(" 确定 ")])),_:1,__:[10]},8,["loading"])]),_:1})]),_:1}),l(a(u),{delay:400},{default:o(()=>[l(d,null,{default:o(()=>[l(_,{class:"w-full",size:"default",onClick:R},{default:o(()=>e[11]||(e[11]=[f(" 返回 ")])),_:1,__:[11]})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{J as _,Z as d};
